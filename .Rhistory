"&provider=", provider,
"&resultsperpage=", 50,
"&page=2"
)
required_parameters3 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=3"
)
required_parameters4 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=4"
)
required_parameters5 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=5"
)
required_parameters6 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=6"
)
query1 <- paste0(base_url, key_parameter, key, required_parameters1)
query2 <- paste0(base_url, key_parameter, key, required_parameters2)
query3 <- paste0(base_url, key_parameter, key, required_parameters3)
query4 <- paste0(base_url, key_parameter, key, required_parameters4)
query5 <- paste0(base_url, key_parameter, key, required_parameters5)
query6 <- paste0(base_url, key_parameter, key, required_parameters6)
data1 <- fromJSON(query1)
data2 <- fromJSON(query2)
data3 <- fromJSON(query3)
data4 <- fromJSON(query4)
data5 <- fromJSON(query5)
data6 <- fromJSON(query6)
data1 <- data1$result
data2 <- data2$result
data3 <- data3$result
data4 <- data4$result
data5 <- data5$result
data6 <- data6$result
View(data1)
View(data2)
combinedData <- rbind(data1, data2)
View(combinedData)
combinedData <- flatten(combinedData)
if(isinstantbook){
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.instantBookable == isinstantbook,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
} else{
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
}
return(combinedData)
}
shiny::runApp()
library(jsonlite)
source('scripts/getLatLng.r')
get_data <- function(queryData) {
base_url <- "https://zilyo.p.mashape.com/search?"
key_parameter <- "mashape-key="
key <- "nowlV7qpGSmshTJ2jv6AeLUAGUrjp1632Pzjsn40XflJySxVK5"
guests <- queryData$guests
provider <- queryData$provider
isinstantbook <- queryData$isinstantbook
latlng <- getLatLng(queryData$city, queryData$state)
lat <- latlng$lat
lng <- latlng$lon
maxdistance <- queryData$maxdistance
numofbathrooms <- queryData$numofbathrooms
numofbedrooms <- queryData$numofbedrooms
numofbeds <- queryData$numofbeds
pricemax <- queryData$maxprice[1]
pricemin <- queryData$minprice[2]
resultsperpage <- queryData$resultsperpage
page <- queryData$page
required_parameters1 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=1"
)
required_parameters2 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=2"
)
required_parameters3 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=3"
)
required_parameters4 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=4"
)
required_parameters5 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=5"
)
required_parameters6 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=6"
)
query1 <- paste0(base_url, key_parameter, key, required_parameters1)
query2 <- paste0(base_url, key_parameter, key, required_parameters2)
query3 <- paste0(base_url, key_parameter, key, required_parameters3)
query4 <- paste0(base_url, key_parameter, key, required_parameters4)
query5 <- paste0(base_url, key_parameter, key, required_parameters5)
query6 <- paste0(base_url, key_parameter, key, required_parameters6)
data1 <- fromJSON(query1)
data2 <- fromJSON(query2)
data3 <- fromJSON(query3)
data4 <- fromJSON(query4)
data5 <- fromJSON(query5)
data6 <- fromJSON(query6)
data1 <- data1$result
data2 <- data2$result
data3 <- data3$result
data4 <- data4$result
data5 <- data5$result
data6 <- data6$result
View(data1)
View(data2)
combinedData <- bind(data1, data2)
View(combinedData)
combinedData <- flatten(combinedData)
if(isinstantbook){
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.instantBookable == isinstantbook,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
} else{
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
}
return(combinedData)
}
shiny::runApp()
library(jsonlite)
source('scripts/getLatLng.r')
get_data <- function(queryData) {
base_url <- "https://zilyo.p.mashape.com/search?"
key_parameter <- "mashape-key="
key <- "nowlV7qpGSmshTJ2jv6AeLUAGUrjp1632Pzjsn40XflJySxVK5"
guests <- queryData$guests
provider <- queryData$provider
isinstantbook <- queryData$isinstantbook
latlng <- getLatLng(queryData$city, queryData$state)
lat <- latlng$lat
lng <- latlng$lon
maxdistance <- queryData$maxdistance
numofbathrooms <- queryData$numofbathrooms
numofbedrooms <- queryData$numofbedrooms
numofbeds <- queryData$numofbeds
pricemax <- queryData$maxprice[1]
pricemin <- queryData$minprice[2]
resultsperpage <- queryData$resultsperpage
page <- queryData$page
required_parameters1 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=1"
)
required_parameters2 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=2"
)
required_parameters3 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=3"
)
required_parameters4 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=4"
)
required_parameters5 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=5"
)
required_parameters6 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=6"
)
query1 <- paste0(base_url, key_parameter, key, required_parameters1)
query2 <- paste0(base_url, key_parameter, key, required_parameters2)
query3 <- paste0(base_url, key_parameter, key, required_parameters3)
query4 <- paste0(base_url, key_parameter, key, required_parameters4)
query5 <- paste0(base_url, key_parameter, key, required_parameters5)
query6 <- paste0(base_url, key_parameter, key, required_parameters6)
data1 <- fromJSON(query1)
data2 <- fromJSON(query2)
data3 <- fromJSON(query3)
data4 <- fromJSON(query4)
data5 <- fromJSON(query5)
data6 <- fromJSON(query6)
data1 <- data1$result
data2 <- data2$result
data3 <- data3$result
data4 <- data4$result
data5 <- data5$result
data6 <- data6$result
View(data1)
View(data2)
combinedData <- data1 + data2
View(combinedData)
combinedData <- flatten(combinedData)
if(isinstantbook){
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.instantBookable == isinstantbook,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
} else{
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
}
return(combinedData)
}
shiny::runApp()
library(jsonlite)
source('scripts/getLatLng.r')
get_data <- function(queryData) {
base_url <- "https://zilyo.p.mashape.com/search?"
key_parameter <- "mashape-key="
key <- "nowlV7qpGSmshTJ2jv6AeLUAGUrjp1632Pzjsn40XflJySxVK5"
guests <- queryData$guests
provider <- queryData$provider
isinstantbook <- queryData$isinstantbook
latlng <- getLatLng(queryData$city, queryData$state)
lat <- latlng$lat
lng <- latlng$lon
maxdistance <- queryData$maxdistance
numofbathrooms <- queryData$numofbathrooms
numofbedrooms <- queryData$numofbedrooms
numofbeds <- queryData$numofbeds
pricemax <- queryData$maxprice[1]
pricemin <- queryData$minprice[2]
resultsperpage <- queryData$resultsperpage
page <- queryData$page
required_parameters1 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=1"
)
required_parameters2 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=2"
)
required_parameters3 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=3"
)
required_parameters4 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=4"
)
required_parameters5 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=5"
)
required_parameters6 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=6"
)
query1 <- paste0(base_url, key_parameter, key, required_parameters1)
query2 <- paste0(base_url, key_parameter, key, required_parameters2)
query3 <- paste0(base_url, key_parameter, key, required_parameters3)
query4 <- paste0(base_url, key_parameter, key, required_parameters4)
query5 <- paste0(base_url, key_parameter, key, required_parameters5)
query6 <- paste0(base_url, key_parameter, key, required_parameters6)
data1 <- fromJSON(query1)
data2 <- fromJSON(query2)
data3 <- fromJSON(query3)
data4 <- fromJSON(query4)
data5 <- fromJSON(query5)
data6 <- fromJSON(query6)
data1 <- data1$result
data2 <- data2$result
data3 <- data3$result
data4 <- data4$result
data5 <- data5$result
data6 <- data6$result
View(data1)
View(data2)
combinedData <- c(data1, data2)
View(combinedData)
combinedData <- flatten(combinedData)
if(isinstantbook){
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.instantBookable == isinstantbook,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
} else{
combinedData <- filter(combinedData,
attr.occupancy >= guests,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
}
return(combinedData)
}
shiny::runApp()
library(jsonlite)
source('scripts/getLatLng.r')
get_data <- function(queryData) {
base_url <- "https://zilyo.p.mashape.com/search?"
key_parameter <- "mashape-key="
key <- "nowlV7qpGSmshTJ2jv6AeLUAGUrjp1632Pzjsn40XflJySxVK5"
guests <- queryData$guests
provider <- queryData$provider
isinstantbook <- queryData$isinstantbook
latlng <- getLatLng(queryData$city, queryData$state)
lat <- latlng$lat
lng <- latlng$lon
maxdistance <- queryData$maxdistance
numofbathrooms <- queryData$numofbathrooms
numofbedrooms <- queryData$numofbedrooms
numofbeds <- queryData$numofbeds
pricemax <- queryData$maxprice[1]
pricemin <- queryData$minprice[2]
resultsperpage <- queryData$resultsperpage
page <- queryData$page
required_parameters1 <- paste0(
"&latitude=", lat,
"&longitude=", lng,
"&maxdistance=", maxdistance,
"&provider=", provider,
"&resultsperpage=", 50,
"&page=", page
)
query1 <- paste0(base_url, key_parameter, key, required_parameters1)
data1 <- fromJSON(query1)
data1 <- data1$result
View(data1)
data1 <- flatten(data1)
if(isinstantbook){
data1 <- filter(data1,
attr.occupancy >= guests,
attr.instantBookable == isinstantbook,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
} else{
data1 <- filter(data1,
attr.occupancy >= guests,
attr.bathrooms >= numofbathrooms,
attr.bedrooms >= numofbedrooms,
attr.beds >= numofbeds)
}
return(data1)
}
# required_parameters2 <- paste0(
#   "&latitude=", lat,
#   "&longitude=", lng,
#   "&maxdistance=", maxdistance,
#   "&provider=", provider,
#   "&resultsperpage=", 50,
#   "&page=2"
# )
#
# required_parameters3 <- paste0(
#   "&latitude=", lat,
#   "&longitude=", lng,
#   "&maxdistance=", maxdistance,
#   "&provider=", provider,
#   "&resultsperpage=", 50,
#   "&page=3"
# )
#
# required_parameters4 <- paste0(
#   "&latitude=", lat,
#   "&longitude=", lng,
#   "&maxdistance=", maxdistance,
#   "&provider=", provider,
#   "&resultsperpage=", 50,
#   "&page=4"
# )
#
# required_parameters5 <- paste0(
#   "&latitude=", lat,
#   "&longitude=", lng,
#   "&maxdistance=", maxdistance,
#   "&provider=", provider,
#   "&resultsperpage=", 50,
#   "&page=5"
# )
#
# required_parameters6 <- paste0(
#   "&latitude=", lat,
#   "&longitude=", lng,
#   "&maxdistance=", maxdistance,
#   "&provider=", provider,
#   "&resultsperpage=", 50,
#   "&page=6"
# )
#
# query2 <- paste0(base_url, key_parameter, key, required_parameters2)
# query3 <- paste0(base_url, key_parameter, key, required_parameters3)
# query4 <- paste0(base_url, key_parameter, key, required_parameters4)
# query5 <- paste0(base_url, key_parameter, key, required_parameters5)
# query6 <- paste0(base_url, key_parameter, key, required_parameters6)
#
# data2 <- fromJSON(query2)
# data3 <- fromJSON(query3)
# data4 <- fromJSON(query4)
# data5 <- fromJSON(query5)
# data6 <- fromJSON(query6)
#
# data2 <- data2$result
# data3 <- data3$result
# data4 <- data4$result
# data5 <- data5$result
# data6 <- data6$result
shiny::runApp()
